(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var o=t(2),c=t(15),a=t.n(c),i=(t(20),t(5)),r=t(4),s=(t(21),t(3)),u=t.n(s),d="/api/phonebook",l=function(){return console.log(d),u.a.get(d)},f=t(0),j=function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Add Person Form"}),Object(f.jsxs)("form",{onSubmit:e.addPerson,children:[Object(f.jsxs)("div",{children:["Name: ",Object(f.jsx)("input",{onChange:e.personChange})]}),Object(f.jsxs)("div",{children:["Phone: ",Object(f.jsx)("input",{onChange:e.phoneChange})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:" Add Person "})})]})]})},h=function(e){var n,t=e.message;return"confirmed"===e.notificationStyle&&(n="confirmed"),null===t?null:Object(f.jsx)("div",{className:n,children:t})},b=function(e){var n=e.person,t=e.deletePerson;return Object(f.jsx)("div",{children:Object(f.jsxs)("p",{children:[n.name," - ",n.phone," ",Object(f.jsxs)("button",{onClick:function(){return t(n.id,n.name)},children:[" ","Delete"," "]})]})})};var m=function(){var e=Object(o.useState)([{name:"hmmm...?",id:"Taylor",phone:"123-456-7890"}]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)([]),s=Object(r.a)(a,2),d=s[0],m=s[1],p=Object(o.useState)("some error"),O=Object(r.a)(p,2),v=O[0],x=O[1],g=Object(o.useState)("null"),w=Object(r.a)(g,2),k=w[0],y=w[1];Object(o.useEffect)((function(){l().then((function(e){console.log(e.data),c(e.data)}))}),[]);var P=function(e,n){window.confirm("Do you really want to delete?")&&(u.a.delete("/api/phonebook/".concat(e)).then((function(n){console.log(n),c(t.filter((function(n){return n.id!==e})))})),x("".concat(n," was deleted")),y("confirmed"),setTimeout((function(){x(null)}),2e3))};return Object(f.jsxs)("div",{children:[Object(f.jsx)(j,{addPerson:function(e){e.preventDefault();var n=t.map((function(e){return e.name})),o={name:d.name,id:d.id,phone:d.phone};if(n.includes(d.name)){if(window.confirm("".concat(d.name," already in phonebook. Update number?"))){var a=t.filter((function(e){return e.name===d.name}));console.log(a[0].id),u.a.put("http://localhost:3001/persons/".concat(a[0].id),o).then((function(e){e.data,u.a.get("http://localhost:3001/persons").then((function(e){return c(e.data)}))})).catch((function(){x("The person was already deleted from server"),y("confirmed"),setTimeout((function(){x(null)}),2e3)})),x("Number was updated"),y("confirmed"),setTimeout((function(){x(null)}),2e3)}}else u.a.post("/api/phonebook",o).then((function(e){c(t.concat(o)),m(""),x("Person Added"),y("confirmed"),setTimeout((function(){x(null)}),2e3)}))},personChange:function(e){m(Object(i.a)(Object(i.a)({},d),{},{name:e.target.value}))},phoneChange:function(e){m(Object(i.a)(Object(i.a)({},d),{},{phone:e.target.value}))}}),Object(f.jsx)(h,{notificationStyle:k,message:v}),t.map((function(e){return Object(f.jsx)(b,{person:e,deletePerson:P})}))]})};a.a.render(Object(f.jsx)(m,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.bb818f52.chunk.js.map