(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var o=t(2),c=t(15),a=t.n(c),i=(t(20),t(5)),r=t(4),u=(t(21),t(3)),s=t.n(u),d="/api/phonebook",l=function(){return s.a.get(d)},b=t(0),j=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Add Person Form"}),Object(b.jsxs)("form",{onSubmit:e.addPerson,children:[Object(b.jsxs)("div",{children:["Name: ",Object(b.jsx)("input",{onChange:e.personChange})]}),Object(b.jsxs)("div",{children:["Phone: ",Object(b.jsx)("input",{onChange:e.phoneChange})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:" Add Person "})})]})]})},f=function(e){var n=e.message,t=e.notificationStyle;return null===n?null:Object(b.jsx)("div",{className:t,children:n})},h=function(e){var n=e.person,t=e.deletePerson;return Object(b.jsx)("div",{children:Object(b.jsxs)("p",{children:[n.name," - ",n.number," ",Object(b.jsxs)("button",{onClick:function(){return t(n.id,n.name)},children:[" ","Delete"," "]})]})})};var m=function(){var e=Object(o.useState)([{name:"missing api",id:"Taylor",phone:"123-456-7890"}]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)([]),u=Object(r.a)(a,2),d=u[0],m=u[1],p=Object(o.useState)(null),O=Object(r.a)(p,2),v=O[0],x=O[1],g=Object(o.useState)("error"),k=Object(r.a)(g,2),w=k[0],y=k[1];Object(o.useEffect)((function(){l().then((function(e){c(e.data)}))}),[]);var P=function(e,n){window.confirm("Do you really want to delete?")&&(s.a.delete("/api/phonebook/".concat(e)).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),l().then((function(e){return c(e.data)})),x("".concat(n," was deleted")),y("deleted"),setTimeout((function(){x(null)}),2e3))};return Object(b.jsxs)("div",{children:[Object(b.jsx)(j,{addPerson:function(e){e.preventDefault();var n=t.map((function(e){return e.name})),o={name:d.name,number:d.phone};if(n.includes(d.name)){if(window.confirm("".concat(d.name," already in phonebook. Update number?"))){var a=t.find((function(e){return e.name===d.name}));s.a.put("/api/phonebook/".concat(a.id),o).then((function(e){console.log(e.data),s.a.get("/api/phonebook").then((function(e){return c(e.data)}))})).catch((function(){x("".concat(o.name," had their number updated")),y("confirmed"),setTimeout((function(){x(null)}),2e3)})),x("Number of ".concat(o.name," was updated to ").concat(o.number)),y("confirmed"),setTimeout((function(){x(null)}),2e3)}}else s.a.post("/api/phonebook",o).then((function(e){c(t.concat(o)),m(""),x("Person Added"),y("confirmed"),setTimeout((function(){x(null)}),2e3)}))},personChange:function(e){m(Object(i.a)(Object(i.a)({},d),{},{name:e.target.value}))},phoneChange:function(e){m(Object(i.a)(Object(i.a)({},d),{},{phone:e.target.value}))}}),Object(b.jsx)(f,{notificationStyle:w,message:v}),t.map((function(e){return Object(b.jsx)(h,{person:e,deletePerson:P})}))]})};a.a.render(Object(b.jsx)(m,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.8c78db37.chunk.js.map