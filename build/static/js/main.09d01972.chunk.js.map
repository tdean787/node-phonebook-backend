{"version":3,"sources":["services/persons.js","components/Form.js","components/Notification.js","components/Persons.js","App.js","index.js"],"names":["apiURL","axios","get","Form","props","onSubmit","addPerson","onChange","personChange","phoneChange","type","Notification","style","message","notificationStyle","className","Persons","person","deletePerson","name","number","onClick","id","App","useState","phone","persons","setPersons","newPerson","setNewName","errorMessage","setErrorMessage","setNotificationStyle","useEffect","personService","then","response","console","log","data","window","confirm","delete","filter","setTimeout","event","preventDefault","checkName","map","personObj","Math","floor","random","includes","personMatch","find","put","res","catch","post","concat","target","value","ReactDOM","render","document","getElementById"],"mappings":"0PAEMA,EAAS,iBAcA,EAZA,WACb,OAAOC,IAAMC,IAAIF,I,OCgBJG,EAnBF,SAACC,GACZ,OACE,gCACE,iDACA,uBAAMC,SAAUD,EAAME,UAAtB,UACE,yCACQ,uBAAOC,SAAUH,EAAMI,kBAE/B,0CACS,uBAAOD,SAAUH,EAAMK,iBAEhC,8BACE,wBAAQC,KAAK,SAAb,mCCCKC,EAbM,SAAC,GAAoC,IACpDC,EADkBC,EAAiC,EAAjCA,QAMtB,MAJ0B,cAF6B,EAAxBC,oBAG7BF,EAAQ,aAGM,OAAZC,EACK,KAGF,qBAAKE,UAAWH,EAAhB,SAAwBC,KCIlBG,EAdC,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,aACzB,OACE,8BACE,8BACGD,EAAOE,KADV,MACmBF,EAAOG,OAAQ,IAChC,yBAAQC,QAAS,kBAAMH,EAAaD,EAAOK,GAAIL,EAAOE,OAAtD,UACG,IADH,SAES,aCmHFI,MApHf,WACE,MAA8BC,mBAAS,CACrC,CAAEL,KAAM,WAAYG,GAAI,SAAUG,MAAO,kBAD3C,mBAAOC,EAAP,KAAgBC,EAAhB,KAGA,EAAgCH,mBAAS,IAAzC,mBAAOI,EAAP,KAAkBC,EAAlB,KACA,EAAwCL,mBAAS,MAAjD,mBAAOM,EAAP,KAAqBC,EAArB,KACA,EAAkDP,mBAAS,QAA3D,mBAAOV,EAAP,KAA0BkB,EAA1B,KAEAC,qBAAU,WACRC,IAAuBC,MAAK,SAACC,GAC3BC,QAAQC,IAAIF,EAASG,MACrBZ,EAAWS,EAASG,WAErB,IAEH,IAmEMrB,EAAe,SAACI,EAAIH,GACpBqB,OAAOC,QAAP,mCACFxC,IAAMyC,OAAN,yBAA+BpB,IAAMa,MAAK,SAACC,GACzCC,QAAQC,IAAIF,GACZT,EAAWD,EAAQiB,QAAO,SAAC1B,GAAD,OAAYA,EAAOK,KAAOA,SAEtDS,EAAgB,GAAD,OAAIZ,EAAJ,iBACfa,EAAqB,aACrBY,YAAW,WACTb,EAAgB,QACf,OAMP,OACE,gCACE,cAAC,EAAD,CACEzB,UAtFY,SAACuC,GACjBA,EAAMC,iBACN,IAAMC,EAAYrB,EAAQsB,KAAI,SAAC/B,GAAD,OAAYA,EAAOE,QAC3C8B,EAAY,CAChB9B,KAAMS,EAAUT,KAChBG,GAAI4B,KAAKC,MAAsB,OAAhBD,KAAKE,UACpBhC,OAAQQ,EAAUH,OAKpB,GAAIsB,EAAUM,SAASzB,EAAUT,OAC/B,GACEqB,OAAOC,QAAP,UAAkBb,EAAUT,KAA5B,0CACA,CACAkB,QAAQC,IAAIZ,GACZ,IAAI4B,EAAc5B,EAAQ6B,MACxB,SAACtC,GAAD,OAAYA,EAAOE,OAASS,EAAUT,QAExCkB,QAAQC,IAAIgB,GAEZjB,QAAQC,IAAIgB,EAAY,GAAGhC,IAE3Be,QAAQC,IAAIW,GACZhD,IACGuD,IADH,yBACyBF,EAAY,GAAGhC,IAAM2B,GAC3Cd,MAAK,SAACC,GACYA,EAASG,KAC1BtC,IAAMC,IAAI,kBAAkBiC,MAAK,SAACsB,GAAD,OAAS9B,EAAW8B,EAAIlB,YAE1DmB,OAAM,WACL3B,EAAgB,8CAChBC,EAAqB,aACrBY,YAAW,WACTb,EAAgB,QACf,QAEPA,EAAgB,sBAChBC,EAAqB,aACrBY,YAAW,WACTb,EAAgB,QACf,WAML9B,IAAM0D,KAAK,iBAAkBV,GAAWd,MAAK,SAACC,GAC5CT,EAAWD,EAAQkC,OAAOX,IAC1BpB,EAAW,IACXE,EAAgB,gBAChBC,EAAqB,aACrBY,YAAW,WACTb,EAAgB,QACf,SAiCHvB,aA5Be,SAACqC,GACpBhB,EAAW,2BAAKD,GAAN,IAAiBT,KAAM0B,EAAMgB,OAAOC,UA4B1CrD,YAzBc,SAACoC,GACnBhB,EAAW,2BAAKD,GAAN,IAAiBH,MAAOoB,EAAMgB,OAAOC,YA0B7C,cAAC,EAAD,CACEhD,kBAAmBA,EACnBD,QAASiB,IAEVJ,EAAQsB,KAAI,SAAC/B,GAAD,OACX,cAAC,EAAD,CAASA,OAAQA,EAAQC,aAAcA,WCjH/C6C,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.09d01972.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst apiURL = \"/api/phonebook\";\r\n\r\nconst getAll = () => {\r\n  return axios.get(apiURL);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(apiURL, newObject);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${apiURL}/${id}`, newObject);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Form = (props) => {\r\n  return (\r\n    <div>\r\n      <h3>Add Person Form</h3>\r\n      <form onSubmit={props.addPerson}>\r\n        <div>\r\n          Name: <input onChange={props.personChange} />\r\n        </div>\r\n        <div>\r\n          Phone: <input onChange={props.phoneChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\"> Add Person </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, notificationStyle }) => {\r\n  let style;\r\n  if (notificationStyle === \"confirmed\") {\r\n    style = \"confirmed\";\r\n  }\r\n\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className={style}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ person, deletePerson }) => {\r\n  return (\r\n    <div>\r\n      <p>\r\n        {person.name} - {person.number}{\" \"}\r\n        <button onClick={() => deletePerson(person.id, person.name)}>\r\n          {\" \"}\r\n          Delete{\" \"}\r\n        </button>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import \"./App.css\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport personService from \"./services/persons\";\r\nimport Form from \"./components/Form\";\r\nimport Notification from \"./components/Notification\";\r\nimport Persons from \"./components/Persons\";\r\n\r\nfunction App() {\r\n  const [persons, setPersons] = useState([\r\n    { name: \"hmmm...?\", id: \"Taylor\", phone: \"123-456-7890\" },\r\n  ]);\r\n  const [newPerson, setNewName] = useState([]);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [notificationStyle, setNotificationStyle] = useState(\"null\");\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then((response) => {\r\n      console.log(response.data);\r\n      setPersons(response.data);\r\n    });\r\n  }, []);\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    const checkName = persons.map((person) => person.name);\r\n    const personObj = {\r\n      name: newPerson.name,\r\n      id: Math.floor(Math.random() * 999999),\r\n      number: newPerson.phone,\r\n    };\r\n\r\n    let personResponse = undefined;\r\n\r\n    if (checkName.includes(newPerson.name)) {\r\n      if (\r\n        window.confirm(`${newPerson.name} already in phonebook. Update number?`)\r\n      ) {\r\n        console.log(persons);\r\n        let personMatch = persons.find(\r\n          (person) => person.name === newPerson.name\r\n        );\r\n        console.log(personMatch);\r\n\r\n        console.log(personMatch[0].id);\r\n\r\n        console.log(personObj);\r\n        axios\r\n          .put(`/api/phonebook/${personMatch[0].id}`, personObj)\r\n          .then((response) => {\r\n            personResponse = response.data;\r\n            axios.get(\"/api/phonebook\").then((res) => setPersons(res.data));\r\n          })\r\n          .catch(() => {\r\n            setErrorMessage(\"The person was already deleted from server\");\r\n            setNotificationStyle(\"confirmed\");\r\n            setTimeout(() => {\r\n              setErrorMessage(null);\r\n            }, 2000);\r\n          });\r\n        setErrorMessage(\"Number was updated\");\r\n        setNotificationStyle(\"confirmed\");\r\n        setTimeout(() => {\r\n          setErrorMessage(null);\r\n        }, 2000);\r\n      }\r\n\r\n      return;\r\n      //below condition will run if person does not match\r\n    } else {\r\n      axios.post(\"/api/phonebook\", personObj).then((response) => {\r\n        setPersons(persons.concat(personObj));\r\n        setNewName(\"\");\r\n        setErrorMessage(\"Person Added\");\r\n        setNotificationStyle(\"confirmed\");\r\n        setTimeout(() => {\r\n          setErrorMessage(null);\r\n        }, 2000);\r\n      });\r\n    }\r\n  };\r\n\r\n  const personChange = (event) => {\r\n    setNewName({ ...newPerson, name: event.target.value });\r\n  };\r\n\r\n  const phoneChange = (event) => {\r\n    setNewName({ ...newPerson, phone: event.target.value });\r\n  };\r\n\r\n  const deletePerson = (id, name) => {\r\n    if (window.confirm(`Do you really want to delete?`)) {\r\n      axios.delete(`/api/phonebook/${id}`).then((response) => {\r\n        console.log(response);\r\n        setPersons(persons.filter((person) => person.id !== id));\r\n      });\r\n      setErrorMessage(`${name} was deleted`);\r\n      setNotificationStyle(\"confirmed\");\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 2000);\r\n    } else {\r\n      return;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Form\r\n        addPerson={addPerson}\r\n        personChange={personChange}\r\n        phoneChange={phoneChange}\r\n      />\r\n      <Notification\r\n        notificationStyle={notificationStyle}\r\n        message={errorMessage}\r\n      />\r\n      {persons.map((person) => (\r\n        <Persons person={person} deletePerson={deletePerson} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}